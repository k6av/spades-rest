{
   "components": {
      "schemas": {
         "Gamemode": {
            "properties": {
               "author": {
                  "description": "Name of gamemode author",
                  "type": "string"
               },
               "description": {
                  "description": "Longer description of the gamemode",
                  "type": "string"
               },
               "homepage": {
                  "description": "Homepage of the gamemode author",
                  "example": "https://www.example.com",
                  "format": "url",
                  "type": "string"
               },
               "id": {
                  "description": "Unique gamemode ID",
                  "example": 1458071691771966208,
                  "format": "uint64",
                  "readOnly": true,
                  "type": "integer"
               },
               "name": {
                  "description": "Name of this gamemode as specified by its author",
                  "example": "Baz gamemode",
                  "type": "string"
               },
               "tags": {
                  "description": "List of arbitrary tags for the gamemode",
                  "items": {
                     "type": "string"
                  },
                  "type": "array"
               },
               "updated": {
                  "description": "Time the gamemode was last updated",
                  "format": "date-time",
                  "readOnly": true,
                  "type": "string"
               },
               "version": {
                  "description": "Gamemodes version",
                  "example": "1.0.0",
                  "type": "string"
               }
            },
            "type": "object"
         },
         "GamemodeList": {
            "items": {
               "$ref": "#/components/schemas/Gamemode"
            },
            "type": "array"
         },
         "Map": {
            "properties": {
               "author": {
                  "description": "Name of map author",
                  "type": "string"
               },
               "description": {
                  "description": "Longer description of the map",
                  "type": "string"
               },
               "gamemodes": {
                  "description": "Game modes this map is intended for",
                  "items": {
                     "oneOf": [
                        {
                           "description": "ID of the game mode currently being played on this server",
                           "example": 1458071691771966208,
                           "type": "integer"
                        },
                        {
                           "description": "Name of the game mode currently being played on this server",
                           "example": "Baz gamemode",
                           "type": "string"
                        }
                     ]
                  },
                  "type": "array"
               },
               "homepage": {
                  "description": "Homepage of the map author",
                  "example": "https://www.example.com",
                  "format": "url",
                  "type": "string"
               },
               "id": {
                  "description": "Unique map ID",
                  "example": 3433978549599797248,
                  "format": "uint64",
                  "readOnly": true,
                  "type": "integer"
               },
               "name": {
                  "description": "Name of this map as specified by its author",
                  "example": "Bar map",
                  "type": "string"
               },
               "tags": {
                  "description": "List of arbitrary tags for the map",
                  "items": {
                     "type": "string"
                  },
                  "type": "array"
               },
               "txtUrl": {
                  "description": "URL where the metadata (TXT) file for the map can be downloaded",
                  "format": "url",
                  "type": "string"
               },
               "updated": {
                  "description": "Time the map was last updated",
                  "format": "date-time",
                  "readOnly": true,
                  "type": "string"
               },
               "version": {
                  "description": "Map version",
                  "example": "1.0.0",
                  "type": "string"
               },
               "vxlUrl": {
                  "description": "URL where the terrain (VXL) file for the map can be downloaded",
                  "format": "url",
                  "type": "string"
               }
            },
            "type": "object"
         },
         "MapList": {
            "items": {
               "$ref": "#/components/schemas/Map"
            },
            "type": "array"
         },
         "Server": {
            "properties": {
               "country": {
                  "description": "ISO 3166-1 alpha-2 country code of the server",
                  "example": "aq",
                  "format": "country",
                  "type": "string"
               },
               "currentGamemode": {
                  "oneOf": [
                     {
                        "description": "ID of the game mode currently being played on this server",
                        "example": 1458071691771966208,
                        "type": "integer"
                     },
                     {
                        "description": "Name of the game mode currently being played on this server",
                        "example": "Baz gamemode",
                        "type": "string"
                     }
                  ]
               },
               "currentMap": {
                  "oneOf": [
                     {
                        "description": "ID of the map currently being played on this server",
                        "example": 3433978549599797248,
                        "type": "integer"
                     },
                     {
                        "description": "Name of the map currently being played on this server",
                        "example": "Bar map",
                        "type": "string"
                     }
                  ]
               },
               "currentPlayers": {
                  "oneOf": [
                     {
                        "description": "List of IDs of players on the server",
                        "items": {
                           "example": 6129504501702256640,
                           "format": "uint64",
                           "type": "integer"
                        },
                        "type": "array"
                     },
                     {
                        "description": "Number of players on the server",
                        "type": "integer"
                     }
                  ]
               },
               "description": {
                  "description": "Longer description of the server",
                  "type": "string"
               },
               "endpoint": {
                  "$ref": "#/components/schemas/ServerEndpoint"
               },
               "homepage": {
                  "description": "Homepage of the server operator",
                  "example": "https://www.example.com",
                  "format": "url",
                  "type": "string"
               },
               "id": {
                  "description": "Unique server ID",
                  "example": 7427681592233891840,
                  "format": "uint64",
                  "readOnly": true,
                  "type": "integer"
               },
               "mapRotation": {
                  "description": "Rotation of maps that are played on this server",
                  "items": {
                     "oneOf": [
                        {
                           "description": "ID of the map",
                           "example": 3433978549599797248,
                           "type": "integer"
                        },
                        {
                           "description": "Name of the map",
                           "example": "Bar map",
                           "type": "string"
                        }
                     ]
                  },
                  "type": "array"
               },
               "maxPlayers": {
                  "description": "Maximum number of players",
                  "type": "integer"
               },
               "name": {
                  "description": "Name of this server as specified by its operator",
                  "example": "Foo server",
                  "type": "string"
               },
               "operator": {
                  "description": "Name of the server operator",
                  "type": "string"
               },
               "protoVersion": {
                  "description": "Protocol version supported by the server, where 0.75 is 3 and 0.76 is 4",
                  "example": 3,
                  "type": "integer"
               },
               "status": {
                  "description": "Status of the server",
                  "enum": [
                     "online",
                     "offline",
                     "unknown"
                  ],
                  "type": "string"
               },
               "tags": {
                  "description": "List of arbitrary tags for the server",
                  "items": {
                     "type": "string"
                  },
                  "type": "array"
               },
               "updated": {
                  "description": "Time when server information was last updated",
                  "format": "date-time",
                  "readOnly": true,
                  "type": "string"
               }
            },
            "type": "object"
         },
         "ServerEndpoint": {
            "oneOf": [
               {
                  "description": "IPv4 address",
                  "example": "192.0.0.1",
                  "format": "ipv4",
                  "type": "string"
               },
               {
                  "description": "IPv6 address",
                  "example": "fc32::10",
                  "format": "ipv6",
                  "type": "string"
               },
               {
                  "description": "DNS name",
                  "example": "example.com",
                  "format": "hostname",
                  "type": "string"
               }
            ]
         },
         "ServerList": {
            "items": {
               "$ref": "#/components/schemas/Server"
            },
            "type": "array"
         }
      },
      "securitySchemes": {
         "apiToken": {
            "bearerFormat": "JWT",
            "scheme": "bearer",
            "type": "http"
         },
         "userToken": {
            "bearerFormat": "JWT",
            "scheme": "bearer",
            "type": "http"
         }
      }
   },
   "info": {
      "description": "A new master server API for games based on the classic Ace of Spades.",
      "title": "Ace of Spades Master Server API",
      "version": "0.1.0"
   },
   "openapi": "3.0.3",
   "paths": {
      "/gamemodes": {
         "get": {
            "description": "List the available game modes",
            "operationId": "listGamemodes",
            "responses": {
               "200": {
                  "content": {
                     "application/json": {
                        "schema": {
                           "$ref": "#/components/schemas/GamemodeList"
                        }
                     }
                  },
                  "description": "OK"
               }
            },
            "summary": "List game modes",
            "tags": [
               "gamemode"
            ]
         }
      },
      "/gamemodes/{id}": {
         "get": {
            "description": "Get information about a specific game mode",
            "operationId": "getGamemode",
            "parameters": [
               {
                  "description": "ID of the game mode to return",
                  "in": "path",
                  "name": "id",
                  "required": true,
                  "schema": {
                     "format": "uint64",
                     "type": "integer"
                  }
               }
            ],
            "responses": {
               "200": {
                  "content": {
                     "application/json": {
                        "schema": {
                           "$ref": "#/components/schemas/Gamemode"
                        }
                     }
                  },
                  "description": "OK"
               },
               "404": {
                  "description": "No such game mode found"
               }
            },
            "summary": "Get game mode",
            "tags": [
               "gamemode"
            ]
         }
      },
      "/maps": {
         "get": {
            "description": "List the available game maps",
            "operationId": "listMaps",
            "responses": {
               "200": {
                  "content": {
                     "application/json": {
                        "schema": {
                           "$ref": "#/components/schemas/MapList"
                        }
                     }
                  },
                  "description": "OK"
               }
            },
            "summary": "List game maps",
            "tags": [
               "map"
            ]
         }
      },
      "/maps/{id}": {
         "get": {
            "description": "Get information about a specific game map",
            "operationId": "getMap",
            "parameters": [
               {
                  "description": "ID of the map to return",
                  "in": "path",
                  "name": "id",
                  "required": true,
                  "schema": {
                     "format": "uint64",
                     "type": "integer"
                  }
               }
            ],
            "responses": {
               "200": {
                  "content": {
                     "application/json": {
                        "schema": {
                           "$ref": "#/components/schemas/Map"
                        }
                     }
                  },
                  "description": "OK"
               },
               "404": {
                  "description": "No such map found"
               }
            },
            "summary": "Get game map",
            "tags": [
               "map"
            ]
         }
      },
      "/servers": {
         "get": {
            "description": "List the available game servers",
            "operationId": "listServers",
            "responses": {
               "200": {
                  "content": {
                     "application/json": {
                        "schema": {
                           "$ref": "#/components/schemas/ServerList"
                        }
                     }
                  },
                  "description": "OK"
               }
            },
            "summary": "List game servers",
            "tags": [
               "server"
            ]
         },
         "post": {
            "description": "Create a new game server",
            "operationId": "createServer",
            "requestBody": {
               "content": {
                  "application/json": {
                     "schema": {
                        "$ref": "#/components/schemas/Server"
                     }
                  }
               },
               "description": "Server object to be created"
            },
            "responses": {
               "201": {
                  "content": {
                     "application/json": {
                        "schema": {
                           "description": "Unique ID of the created server",
                           "example": 7427681592233891840,
                           "format": "uint64",
                           "type": "integer"
                        }
                     }
                  },
                  "description": "Created"
               },
               "400": {
                  "description": "Invalid data"
               },
               "401": {
                  "description": "API token is missing or invalid"
               }
            },
            "security": [
               {
                  "apiToken": [ ]
               }
            ],
            "summary": "Create game server",
            "tags": [
               "server"
            ]
         }
      },
      "/servers/{id}": {
         "delete": {
            "description": "Delete an existing game server",
            "operationId": "deleteServer",
            "parameters": [
               {
                  "description": "ID of the server to delete",
                  "in": "path",
                  "name": "id",
                  "required": true,
                  "schema": {
                     "format": "uint64",
                     "type": "integer"
                  }
               }
            ],
            "responses": {
               "204": {
                  "description": "OK"
               },
               "400": {
                  "description": "Invalid data"
               },
               "401": {
                  "description": "API token is missing or invalid"
               },
               "403": {
                  "description": "API token does not own this server"
               },
               "404": {
                  "description": "No such server found"
               }
            },
            "security": [
               {
                  "apiToken": [ ]
               }
            ],
            "summary": "Delete game server",
            "tags": [
               "server"
            ]
         },
         "get": {
            "description": "Get information about a specific game server",
            "operationId": "getServer",
            "parameters": [
               {
                  "description": "ID of the server to return",
                  "in": "path",
                  "name": "id",
                  "required": true,
                  "schema": {
                     "format": "uint64",
                     "type": "integer"
                  }
               }
            ],
            "responses": {
               "200": {
                  "content": {
                     "application/json": {
                        "schema": {
                           "$ref": "#/components/schemas/Server"
                        }
                     }
                  },
                  "description": "OK"
               },
               "404": {
                  "description": "No such server found"
               }
            },
            "summary": "Get game server",
            "tags": [
               "server"
            ]
         },
         "put": {
            "description": "Update an existing game server",
            "operationId": "updateServer",
            "parameters": [
               {
                  "description": "ID of the server to update",
                  "in": "path",
                  "name": "id",
                  "required": true,
                  "schema": {
                     "format": "uint64",
                     "type": "integer"
                  }
               }
            ],
            "requestBody": {
               "content": {
                  "application/json": {
                     "schema": {
                        "$ref": "#/components/schemas/Server"
                     }
                  }
               },
               "description": "New server object"
            },
            "responses": {
               "200": {
                  "content": {
                     "application/json": {
                        "schema": {
                           "$ref": "#/components/schemas/Server"
                        }
                     }
                  },
                  "description": "OK"
               },
               "400": {
                  "description": "Invalid data"
               },
               "401": {
                  "description": "API token is missing or invalid"
               },
               "403": {
                  "description": "API token does not own this server"
               },
               "404": {
                  "description": "No such server found"
               }
            },
            "security": [
               {
                  "apiToken": [ ]
               }
            ],
            "summary": "Update game server",
            "tags": [
               "server"
            ]
         }
      }
   },
   "servers": [
      {
         "url": "https://example.com"
      }
   ],
   "tags": [
      {
         "description": "Game server discovery",
         "name": "server"
      },
      {
         "description": "Player authentication and social",
         "name": "player"
      },
      {
         "description": "Database of maps",
         "name": "map"
      },
      {
         "description": "Database of game modes",
         "name": "gamemode"
      }
   ]
}
